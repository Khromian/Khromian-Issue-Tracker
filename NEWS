# Khromian 21-XX (UPCOMING VERSION, UNRELEASED)
- Notable upgrades:
  * Plasma 5.21 -> Plasma 5.22
  * Linux 5.10 -> Linux 5.14
  * Calamares 3.2.41.1 -> 3.2.42
  
- Use WirePlumber as the default session manager for PipeWire,
  assuming no regressions are found.

- PulseAudio is excluded outright, as plasma-pa now accepts
  pipewire-pulse as an alternate dependency. Unfortunately,
  this requires replacing pavucontrol-qt with the GTK version
  for the time-being.

- knownIssuesUrl and releaseNotesUrl are set in Calamares, showing
  links to the GH issues page and this NEWS file in the welcome
  screen of the installer.
  
- Lower the storage minimum from 8.5GB to 8GB. This isn't a
  major change right now but it'll make things a little less tight.
  Eventually this will be lowered to 3.5GiB once Calamares can
  mount the chroot with all of our fstab options so they apply
  during the extraction process.
  
- Raise the RAM minimum from 1.5GB to 2.0GB. In testing,
  1.5GB leads to a truly awful experience where NoHang
  constantly triggers and causes desktop elements
  to crash in the live environment. This is especially bad
  when no swap space is available, such as, again, in the live
  environment. It's not impossible that this could even interrupt
  the install at a bad time, leaving the system in an inconsistent state.
  
- plasma-discover-backend-snap is included by default, but
  ***not*** snapd. Snaps will remain discouraged, but this
  should hopefully allow for better integration if a user
  ends up requiring and installing snapd.
  
- VKBasalt and MangoHUD are preinstalled, since their installed
  size (even with new dependencies) is very low, and they're
  popular among gamers. libxnvctrl0 is also added to enable
  stats for NVIDIA GPUs, if the proprietary driver is present.
  
- GOverlay is being evaluated for inclusion as a way to configure
  and enable these tools through a GUI, at risk of making the install
  seem even more bloated for non-gaming usecases, since it would add
  another menu entry as well.

- Images with the NVIDIA drivers preinstalled are built and
  distributed through the "Extras" section. This is probably
  more of a stop-gap. The big problem right now is, for cards new
  enough to lack firmware and/or Nouveau support, a safe graphics
  mode is available in the live environment, but this doesn't carry
  over into the installed system, requiring users to manually add
  nomodeset (and any other relevant parameters) to their boot options
  in order to get in and install the proprietary driver. In these
  cases, having prebaked ISOs avoids boot parameter fiddling.
  Eventually, users should instead have an option during installation
  to install the proprietary drivers (including legacy if needed).
  
- Free images are available in Extras. These are the same as the main images,
  except they only use the "main" component, excluding "contrib"
  and "non-free" firmware and software. This makes them fully DFSG-compliant,
  at the cost of being extremely incompatible with most hardware. Still,
  they're easy enough to build that they're also easy to justify.
  
- On minimal images, the default media player is now MPV instead of Haruna.
  The default minimal browser is now Firefox ESR instead of Falkon, owing
  to the relatively small size increase, the lack of security and extension
  support for QtWebEngine, and the lack of active upstream development on Falkon.

----------

# Khromian 2109-9 (2021-09-13)
- Add NEWS file in the issue tracker for documenting changes.

- Initial prototypes of small images. These have a minimal package set
  with every non-essential application excluded to drive down the file
  size. Some rare firmware is excluded. LZMA compression is used instead
  of Zstd. These are suitable for users who want a very baseline system
  they can configure further, or those with severe space constraints.
  Images should be <1.5GB and the installed system size should be <2.5GB.

- Carlito and Caladea fonts installed by default, allowing LibreOffice to view
  documents written using the Calibri and Cambria fonts with proper metrics.

- Newly preinstalled by personal request: Neofetch, Kolourpaint, KMines, KDialog.
  p7zip-full and p7zip-rar are explicitly brought in.

- The Zstd compression level for the compressed filesystem is increased from
  15 to 17.

- GTK_USE_PORTAL=1 is a default environment variable in order to enable native
  KDE file pickers in Firefox and other select applications that support it.

- Add a PolKit rule that allows users in the "sudo" group to mount external drives
  without entering a password (necessary for KDE automounting to work correctly).
  
- If installing to a BTRFS partition, mount with discard=async on SSDs.

- Rebase against Testing instead of Sid, fixing a notorious issue with Plasma
  being removed due to dependency issues whenever installing the Broadcom or
  NVIDIA driver. This does unfortunately mean reverting to Calamares 3.2.41.1
  with a manual patch to fix BTRFS-on-root. libappindicator1 is temporarily
  cherrypicked from Sid to ease installation of Discord. None of this is kosher!

- Don't include Wine by default, as currently, only Wine 5.0 is available,
  and this causes issues with applications that prefer your system Wine version,
  due to its age. Additionally, Winetricks 20210206 is considerably out-of-date
  and does not reflect the current state of the project. There are also some fair
  concerns that new users who are unfamiliar with Wine may accidentally use
  Windows versions of software even when Linux ports/alternatives are available,
  due to the integration. If we re-add Wine in the future, it should explicitly 
  mention that it is a compatibility layer for Windows applications when launched.
